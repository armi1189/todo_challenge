<!DOCTYPE html>
<html ng-app="toDoList">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>toDoList</title>
    <link href='https://fonts.googleapis.com/css?family=Cabin|Indie+Flower' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="js/app.js"></script>
    <script src="js/services/tasks.js"></script>
    <script src="js/controllers/toDoListController.js"></script>
    <script src="js/controllers/panelController.js"></script>
  </head>

  <body ng-controller="toDoListController as toDoCtrl"> 

      <section class="container" ng-controller="panelController as panelCtrl">

        <section class="row panel_buttons">
          <button class="btn panel_selector" id='all_btn' ng-click="panelCtrl.setPanel(1)">All</button>
          <button class="btn panel_selector" id="incomplete_btn" ng-click="panelCtrl.setPanel(2)">To do</button>
          <button class="btn panel_selector" id='complete_btn' ng-click="panelCtrl.setPanel(3)">Complete</button>
          <button class="btn panel_selector" id='clear_all_btn' ng-click="toDoCtrl.clearAll()">Clear all</button>
        </section>

        <section class="row new_task">
          <div class="col-md-8 col-md-offset-2">
            <form ng-submit="toDoCtrl.addTask()">
              <input type="text" id="new_task" ng-model="toDoCtrl.newTask.name" placeholder="Write a task">
              <input type="submit" id="add_btn" class="btn" value="Add Task">
            </form>
          </div>
        </section>

        <section class="row" ng-show="panelCtrl.isPanel(1)">
          <div class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 list">
            <ul ng-repeat="allTask in toDoCtrl.tasks">
              <li>
                <span ng-class="allTask.status ? 'completed-task' : 'remove_task'" ng-click="allTask.status ? false : toDoCtrl.closeTask(allTask)">
                  {{toDoCtrl.getMark(allTask.status)}}
                </span>
                {{allTask.name}}
              </li>
            </ul>
          </div>
          <section class="row">
            <aside class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 count">
              <span id="all_tasks_count" class="count-text">Total tasks: {{toDoCtrl.tasks.length}}</span>
            </aside>
          </section>
        </section>

        <section class="row" ng-show="panelCtrl.isPanel(2)">
          <div class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 list">
            <ul ng-repeat="incompletedTask in incompleteFilter = (toDoCtrl.tasks | filter: { status: false })">
              <li>
                <span class="remove_task" ng-click="toDoCtrl.closeTask(incompletedTask)">X</span>
                {{incompletedTask.name}}
              </li>
            </ul>
          </div>
          <section class="row">
            <aside class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 count">
              <span id="incomplete_tasks_count" class="count-text">Incompleted tasks: {{incompleteFilter.length}}</span>
            </aside>
          </section>
        </section>

        <section class="row" ng-show="panelCtrl.isPanel(3)">
          <div class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 list">
            <ul ng-repeat="completedTask in completeFilter = (toDoCtrl.tasks | filter: { status: true })">
              <li>
                <span class="completed-task">V</span>
                {{completedTask.name}}
              </li>
            </ul>
          </div>
          <section class="row">
            <aside class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 count">
              <span id="complete_tasks_count" class="count-text">Completed tasks: {{completeFilter.length}}</span>
            </aside>
          </section>
        </section>

      </section>  
  </body>
</html>